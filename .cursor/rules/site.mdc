---
alwaysApply: true
---

以下の内容をもとにサイトを構築してください。

# ======================================
# リニューアル概要
# ======================================
project:
  name: "マイレシピv2"
  goal: "現行のヘッドレスCMSで構築したサイト（"https://myrecipe-tool.netlify.app/"）を、モダンなフロントエンド技術で再構成し、UX・パフォーマンスを改善する"
  background:
    - "既存サイトは更新性が悪く、仕様が細かすぎる"
    - "一部のコンテンツをMCPサーバーを使って自動入力することで入力の手間を減らしたい"

# ======================================
# 採用技術
# ======================================
tech:
  frontend: Astro
  language: TypeScript
  styling: TailwindCSS4
  deployment: Github Pages
  cms: MicroCMS
  fetching: "SSG"
  notes:
    - "TypeScriptはstrictモード"
    - "セミコロンは付けない"

# ======================================
# サイトマップ
# ======================================
pages:
  static:
    - path: "/"
      description: "トップページ"
  dynamic:
    - path: "/recipes/[id]"
      description: "レシピ詳細（build後は静的）"


# ======================================
# デザイン
# ======================================

ipad miniの横長サイズで閲覧する想定。
買い物時用にスマホの縦長サイズでも閲覧できるようにする。

design:
  colors:
    primary: "#10b981"
    secondary: "#f3f4f6"
    background: "#ffffff"
  typography:
    baseFont: "Noto Sans JP"

# ======================================
# コーディングルール
# ======================================
rules:
  indent: 2
  naming:
    components: "PascalCase"
    files: "kebab-case"
  eslint: true
  prettier: true
  description: "その他ルールは.editorconfigに準拠"

# ======================================
# その他使用ライブラリ
# ======================================

- bun
- zustand（必要であれば）
- React
- biome（linter、prettier）
- prettier（Astro用）

# ======================================
# リニューアル要件（API）
# ======================================

- 材料の以下の情報は廃止扱い。サイト上では参照・出力しない想定。
    - 栄養情報
    - 旬の時期
- コンテンツAPI「栄養」廃止扱い
- コンテンツAPI「レシピ」について
    - 「手順」の「グループ」廃止扱い
    - 「手順」の「手順説明」はマークダウン形式とし、「必要な材料」のグループへのページ内リンクを作成できるようにしたい
    - 「必要な材料」は半角英数字として定義するようにする。実際の運用ではhtmlのid名とし、ページ内リンクできるようにする。
- result.mdc（リニューアル前のサイト情報）
- コンテンツAPI「材料」にカテゴリ追加想定
    - 調味料
    - 肉
    - 水産物
    - 野菜
    - 果物
    - 豆類
    - 麺類
    - 卵・チーズ・乳製品
    - 米・雑穀・シリアル・パン
    - 粉類
    - 乾物
    - その他
- コンテンツAPI「レシピ」に「AI評価」を追加、microCMSのMCPサーバーを使ってレシピの情報を下に栄養価を評価してもらう

# ======================================
# リニューアル要件（ページ構成とUIコンポーネント）
# ======================================

### 0. 共通パーツ

全ページに入る。

**UIコンポーネント**:

- `Header`: ホームへのリンク


### 1. トップページ (`/`)

- レシピ検索エリア
    - レシピ名で検索
        - コンテンツAPI「レシピ」のタイトル名で検索するキーワード検索
    - 材料で検索エリア
        - コンテンツAPI「材料」のカテゴリごとに見出しをつけてボタンスタイルでリスト表示
    - 調理方法で検索エリア
        - コンテンツAPI「レシピ」の「調理方法」ごとにボタンスタイルでリスト表示
- レシピ提案エリア
    - 気分型（完全ランダムにレシピを3つ一覧表示。ページを読み込むたびに結果が変わる）
    - 以下の条件に一致するレシピをランダムで最大6つ一覧表示、もっと見たい人用に全件表示用ページに飛ばすリンクボタンも最後に出力
        - タンパク質をとりたい（＝コンテンツAPI「レシピ」に紐づいているコンテンツAPI「材料」に肉、水産物、卵・チーズ・乳製品、豆類のカテゴリのいずれか1つ以上含まれている）
        - 野菜をとりたい（＝コンテンツAPI「レシピ」に紐づいているコンテンツAPI「材料」に野菜のカテゴリが1つ以上含まれている）

**UIコンポーネント**:

- `SearchSection`: 検索・フィルター機能
  - `SearchBox`: キーワード検索入力
  - `ButtonList`: 調理方法or材料で検索する際のインラインリスト。ボタンスタイル
- `RecipeList`: レシピ一覧表示
  - `RecipeCard`: 個別レシピカード（リンク付き）
    - レシピタイトル
    - 調理方法タグ
    - 説明文


### 2. 検索結果・レシピ一覧ページ (`/recipes/[パラメータ]`)

- 全件表示、ページングなしで一覧表示
- 並び替えが可能で、ランダム、新着の降順の2種
- パラメータによって出力する内容を変える
    - keyword・・・レシピ名検索（日本語）
    - cooking・・・調理方法（日本語）
    - ingredient・・・材料（日本語）
    - suggestion
        - タンパク質を取りたい・・・protein
        - 野菜を取りたい・・・vegetable

**UIコンポーネント**:

- `SortSelect`: 並び替えプルダウン
- `RecipeList`: レシピ一覧表示
  - `RecipeCard`: 個別レシピカード（リンク付き）
    - レシピタイトル
    - 調理方法タグ
    - 説明文

### 3. レシピ詳細ページ (`/recipes/[id]`)

- レシピヘッダー
  - レシピタイトル（h1）
  - 調理方法タグ（リスト形式）
  - レシピ説明文（パラグラフ）
- ステップナビゲーション: ステップ番号のドット表示（4ステップ）
- 調理手順セクション
  - 各ステップ（article要素）
    - ステップ番号
    - 手順説明文
    - タイマーボタン（該当ステップのみ）
- タブ機能
  - "Cooking"タブ: 調理手順表示
    - 調理手順を少し画面から離れてみても見えるように大きめの文字サイズ（20px程度）で出力
    - 手順の説明はマークダウン形式のはずなので、マークダウンをhtmlに変換して出力
    - 画面右にステップナビゲーションのドットも縦並びで表示、クリックしたら該当手順に移動
    - 必要な材料のグループを示すと思われるページ内リンクをクリックしたら、モーダルで該当グループの材料を一覧で表示させる
  - "Memo"タブ: メモ機能（推測）
    - 必要な材料をグループ別に出す。該当するグループがなかった場合は最後に出力
    - チェックボックス付きリスト。買い物時にも活用できるように、チェックしたら打ち消し戦を入れる

**UIコンポーネント**:

- `RecipeHeader`: レシピ基本情報
  - `RecipeTitle`: タイトル表示
  - `CookingMethodTags`: 調理方法タグリスト
  - `RecipeDescription`: 説明文
- `StepNavigation`: ステップ番号ナビゲーション
- `RecipeSteps`: 調理手順セクション
  - `StepItem`: 個別ステップ
    - `StepContent`: 手順説明
    - `TimerButton`: タイマー機能（オプション）
- `TabNavigation`: タブ切り替え（Cooking/Memo）